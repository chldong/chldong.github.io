---
layout: post
title: "某大数据项目组件需求文档"
date: 2020-04-23
---

## 需求概述

建设大数据中心节点，计算存储安全都要考虑，通过一批 X86服务器做虚拟化，一批物理机跑 Hadoop，还需考虑使用 GPU 应用，考虑网络与安全。提供云桌面，下载、设备使用等各项安全权限可由模板灵活配置。

建设70个子节点，每节点通过两到三台X86服务器做虚拟化。
4月份完成两个试点子节点的建设，完成中心节点的方案确认和基础环境建设（考虑先用三到四台 x86服务器搭起基础管理环境）
提供API，支持业务系统通过调用 API 自动创建、备份、回收、调整虚机（包括原生云管的各项参数设置）

## 应用场景

![架构草图02](/images/image-2020-04-23-02.png)

各子节点A类数据流同步到达中心节点，B类数据在各自节点，中心节点存放各节点的数据目录。

+ 需求1：中心计算节点按需访问中心数据库集群节点或指定节点的数据；
+ 需求2：中心节点下发算法到各子节点，子节点计算后回传结果；
+ 需求3：各子节点协同算力计算相同问题。

## 中心节点

+ 搭建X86虚拟化平台（计算、网络、存储），部署整体云管平台；
+ 搭建大于100节点的hadoop集群；
+ 可扩展的GPU计算能力；

配置建议：16C*2/512G/4T*6 （4T可用容量的SSD高速虚拟存储）

## 边缘节点

+ 使用三台双路X86服务器做虚拟化（计算、网络、存储），不低于10T的存储，不低于192G内存，不低于24核心；
+ 考虑数据接入安全组件和后期横向扩容；
+ 可扩展的GPU计算能力；

配置建议：12C*1/192G/4T*5（3块用于 Hadoop 集群，2块用于容器集群）

## 网络及安全需求

+ 节点之间通信采用 IPSec 组件；
+ 东西向流量采用分布式 IPtables 组件；
+ 中心节点业务出口使用 4* 万兆网卡；

## 超融合多集群管理需求

![架构草图01](/images/image-2020-04-23-01.png)

### 云管平台

+ 无限制支持：租户管理、VPC网络、弹性IP、SLB、纳管 Docker 集群（待讨论）、纳管物理机（待讨论）、纳管云桌面管理（待讨论）、自动化运维（Hadoop 集群监控、Sql Server 2016+ 集群监控、可采用脚本批量部署虚拟机）

## 大数据组件相关需求

超融合集群管理平台采用应用商店的形式提供如下集群和应用组件的快速部署

### 集群类型

+ HADOOP
中心节点：6*4C32G4T
边缘节点：3*4C32G4T

### 组件版本

+ hadoop 3.1.2
+ zookeeper 3.4.9
+ knox 1.2.0
+ hive 3.1.1
+ hdbase 2.2.0
+ hue 4.4.0
+ oozie 5.1.0
+ spark_hadoop3.1 2.4.3

### Kubernetes Docker

+ Kubernetes
中心节点：6*4C8G500G
边缘节点：3*4C8G500G
