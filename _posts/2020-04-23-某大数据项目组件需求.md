---
layout: post
title: "某大数据项目组件需求文档"
date: 2020-04-23
---
<!-- TOC -->

- [需求概述](#%E9%9C%80%E6%B1%82%E6%A6%82%E8%BF%B0)
- [应用场景](#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF)
- [中心节点](#%E4%B8%AD%E5%BF%83%E8%8A%82%E7%82%B9)
- [边缘节点](#%E8%BE%B9%E7%BC%98%E8%8A%82%E7%82%B9)
- [网络及安全需求](#%E7%BD%91%E7%BB%9C%E5%8F%8A%E5%AE%89%E5%85%A8%E9%9C%80%E6%B1%82)
- [超融合多集群管理需求](#%E8%B6%85%E8%9E%8D%E5%90%88%E5%A4%9A%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86%E9%9C%80%E6%B1%82)
    - [云管平台](#%E4%BA%91%E7%AE%A1%E5%B9%B3%E5%8F%B0)
    - [集群类型](#%E9%9B%86%E7%BE%A4%E7%B1%BB%E5%9E%8B)
    - [组件版本](#%E7%BB%84%E4%BB%B6%E7%89%88%E6%9C%AC)
    - [Kubernetes Docker](#kubernetes-docker)

<!-- /TOC -->

## 需求概述

+ 建设大数据中心节点，计算存储安全都要考虑，通过一批 X86服务器做虚拟化，一批物理机跑 Hadoop，还需考虑使用 GPU 算力，考虑网络与安全。
+ 提供云管理组件、云桌面组件及安全组件。
+ 部署、调整等各项参数可由 UI 界面灵活配置（UI界面支持定制）。
+ 建设 70 个边缘节点，每节点通过三台 x86服务器做虚拟化。
+ 4 月份完成两个试点边缘节点的建设，完成中心节点的方案确认和基础环境建设（考虑先用总计九台 x86服务器搭起多集群管理环境）
+ 提供项目生命周期内 API 接口文档以及相关原厂研发技术支持，配合业务系统通过调用 API 自动创建、备份、回收、调整虚机（开放云管平台的所有参数设置接口）

## 应用场景

![架构草图02](/images/image-2020-04-23-02.png)

各子节点 A 类数据流同步到达中心节点，B 类数据在各自节点，中心节点存放各节点的数据目录。

+ 需求1：中心计算节点按需访问中心数据库集群节点或指定节点的数据；
+ 需求2：中心节点下发算法到各子节点，子节点计算后回传结果；
+ 需求3：各子节点协同算力计算相同问题。

## 中心节点

+ 搭建 x86虚拟化平台（计算、网络、存储），部署整体云管平台；
+ 搭建大于100节点的 Hadoop 集群；
+ 可扩展的 GPU 计算能力；

配置建议：16Cx2/512G/4Tx6 （4T 可用容量的 SSD 高速虚拟存储）

## 边缘节点

+ 使用三台双路 X86服务器做虚拟化（计算、网络、存储），不低于 10T 的存储，不低于192G 内存，不低于 24 核心；
+ 考虑数据接入安全组件和后期横向扩容；
+ 可扩展的GPU计算能力；

配置建议：12Cx1/192G/4Tx5（3块用于 Hadoop 集群，2 块用于容器集群）

## 网络及安全需求

+ 节点之间通信采用 IPSec 组件；
+ 东西向流量采用分布式 IPtables 组件；
+ 中心节点业务出口使用 4* 万兆网卡；

## 超融合多集群管理需求

### 云管平台

+ 无限制支持：租户管理、VPC网络、弹性IP、SLB、纳管 Docker 集群（待讨论）、纳管物理机（待讨论）、纳管云桌面管理（待讨论）、自动化运维（Hadoop 集群监控、Microsoft® SQL Server® 2016+ 集群监控、可采用脚本批量部署虚拟机）

+ 超融合集群管理平台采用应用商店的形式提供如下集群和应用组件的快速部署

### 集群类型

+ HADOOP
中心节点：6x4C32G4T
边缘节点：3x4C32G4T

### 组件版本

+ hadoop 3.1.2
+ zookeeper 3.4.9
+ knox 1.2.0
+ hive 3.1.1
+ hdbase 2.2.0
+ hue 4.4.0
+ oozie 5.1.0
+ spark_hadoop3.1 2.4.3

### Kubernetes Docker

+ Kubernetes
中心节点：6x4C8G500G
边缘节点：3x4C8G500G
